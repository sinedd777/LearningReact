(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{228:function(e,t,a){},238:function(e,t,a){e.exports=a(552)},243:function(e,t,a){},528:function(e,t,a){},529:function(e,t,a){},531:function(e,t,a){},550:function(e,t,a){},551:function(e,t,a){},552:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(45),c=a.n(l),o=(a(243),a(5)),s=a.n(o),u=a(22),i=a(87),m=a.n(i),p=Object({NODE_ENV:"production",PUBLIC_URL:""}).HOST,h={call:function(){var e=Object(u.a)(s.a.mark(function e(t,a,n){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a[t](p+"/"+a,n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),setToken:function(e){e?m.a.defaults.headers.common.Authorization="Bearer "+e:delete m.a.defaults.headers.common.Authorization}},d=a(46),E=a(6),b=a(85),v=a.n(b),f=a(33),g=a(231),O=a(30),k=(a(90),{isAuthenticated:!1,user:{}}),y=Object(f.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return{isAuthenticated:!!Object.keys(t.user).length,user:t.user};default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return Object(O.a)({},e,{message:t.error});case"REMOVE_ERROR":return Object(O.a)({},e,{message:null});default:return e}},polls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POLLS":return t.polls;default:return e}},currentPoll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_POLL":return t.poll;default:return e}}}),j=Object(f.e)(y,{error:{message:null}},Object(f.d)(Object(f.a)(g.a))),w=function(e){return{type:"ADD_ERROR",error:e}},R=a(232),S=function(e){return{type:"SET_CURRENT_USER",user:e}},N=function(e){h.setToken(e)},x=function(){return function(e){console.log("works"),localStorage.clear(),h.setToken(null),e(S({})),e({type:"REMOVE_ERROR"})}},C=function(e){return{type:"SET_POLLS",polls:e}},A=function(e){return{type:"SET_CURRENT_POLL",poll:e}},P=function(e){return function(){var t=Object(u.a)(s.a.mark(function t(a){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.call("get","poll/".concat(e));case 3:n=t.sent,a(A(n)),a({type:"REMOVE_ERROR"}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),r=t.t0.response.data.error,a(w(r));case 12:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()},T=a(34),_=(a(528),Object(E.b)(function(e){return{error:e.error}})(function(e){var t=e.error;return r.a.createElement(n.Fragment,null,null!=t.message&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{class:"warning alert alert-warning ",role:"alert"},t.message)))})),L=a(47),U=a(48),D=a(49),M=a(51),q=a(50),V=a(8),F=a(52),I=(a(529),function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(M.a)(this,Object(q.a)(t).call(this,e))).state={username:"",password:""},a.handleChange=a.handleChange.bind(Object(V.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(F.a)(t,e),Object(D.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this.state,a=t.username,n=t.password,r=this.props.authType;e.preventDefault(),console.log(a,n),this.props.authUser(r,{username:a,password:n})}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password;return r.a.createElement("div",null,r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("table",{className:"table"},r.a.createElement("tr",null,r.a.createElement("input",{className:"form-control mb-2 mr-sm-2",type:"text",value:t,name:"username",onChange:this.handleChange,placeholder:"Username",minLength:5})),r.a.createElement("tr",null,r.a.createElement("input",{className:"form-control mb-2 mr-sm-2",type:"password",value:a,name:"password",onChange:this.handleChange,placeholder:"Password",minLength:8})),r.a.createElement("tr",null," ",r.a.createElement("button",{className:"btn btn-primary buttons_center",type:"submit"},"Submit")))))}}]),t}(n.Component)),B=Object(E.b)(function(){return{}},{authUser:function(e,t){return function(){var a=Object(u.a)(s.a.mark(function a(n){var r,l,c,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.call("post","auth/"+e,t);case 3:r=a.sent,l=r.token,c=Object(R.a)(r,["token"]),localStorage.setItem("jwtToken",l),h.setToken(l),n(S(c)),n({type:"REMOVE_ERROR"}),a.next=17;break;case 12:a.prev=12,a.t0=a.catch(0),console.log(a.t0.response.data.err),o=a.t0.response.data.err,n(w(o));case 17:case"end":return a.stop()}},a,null,[[0,12]])}));return function(e){return a.apply(this,arguments)}}()},logout:x})(I),W=function(e){var t=e.authType;return e.isAuthenticated?r.a.createElement("div",null,r.a.createElement(T.a,{to:"/"}),r.a.createElement("p",null,"REGISTERED")):r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement(B,{authType:t}))},z=a(127),J=a(132),G=(a(531),a(86)),H=a(130),Q=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(M.a)(this,Object(q.a)(t).call(this,e))).state={question:"",options:["",""],visible:!1},a.handleChange=a.handleChange.bind(Object(V.a)(a)),a.addAnswer=a.addAnswer.bind(Object(V.a)(a)),a.handleAnswer=a.handleAnswer.bind(Object(V.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(F.a)(t,e),Object(D.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"addAnswer",value:function(){this.setState({options:[].concat(Object(J.a)(this.state.options),[""])})}},{key:"handleAnswer",value:function(e,t){var a=Object(J.a)(this.state.options);a[t]=e.target.value,this.setState({options:a})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.createPoll(this.state),this.toggle()}},{key:"toggle",value:function(){this.setState({visible:!this.state.visible})}},{key:"render",value:function(){var e=this,t=this.state.options.map(function(t,a){return r.a.createElement(n.Fragment,{key:a},r.a.createElement("input",{className:"form-control mb-2 mr-sm-2",type:"text",required:"required",value:t,onChange:function(t){return e.handleAnswer(t,a)},placeholder:"Option"}))});return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"alert1"},r.a.createElement(G.a,{color:"primary",isOpen:this.state.visible,toggle:this.toggle.bind(this)},"Success! Want to add Another?")),r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("br",null),r.a.createElement("table",{className:"table"},r.a.createElement("tr",null,r.a.createElement("input",{className:"form-control mb-2 mr-sm-2",type:"text",required:"required",name:"question",value:this.state.question,onChange:this.handleChange,placeholder:"Question"})),r.a.createElement("tr",null,r.a.createElement("div",null,t))),r.a.createElement("div",{className:"buttons_center"},r.a.createElement(H.a,{block:!0,color:"primary",onClick:this.addAnswer},"Add Options")," ",r.a.createElement(H.a,{block:!0,color:"info",type:"submit"},"Submit")," ")))}}]),t}(n.Component),K=Object(E.b)(function(){return{}},{createPoll:function(e){return function(){var t=Object(u.a)(s.a.mark(function t(a){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.call("post","poll",e);case 3:n=t.sent,a(A(n)),a({type:"REMOVE_ERROR"}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),r=t.t0.response.data.error,a(w(r));case 12:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()}})(Q),X=function(e){return e.isAuthenticated?r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement(K,null)):r.a.createElement(z.a,{to:"/login"})},Y=a(235),Z=(a(228),Object(E.b)(function(e){return{poll:e.currentPoll}},{vote:function(e,t){return function(){var a=Object(u.a)(s.a.mark(function a(n){var r,l;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.call("post","poll/".concat(e),t);case 3:r=a.sent,n(A(r)),a.next=12;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0.response.data.err),l=a.t0.response.data.err,n(w(l));case 12:case"end":return a.stop()}},a,null,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()}})(function(e){var t=e.poll,a=e.vote,n=t.options&&t.options.map(function(e){return r.a.createElement("button",{onClick:function(){return a(t._id,{answer:e.option})},className:"btn btn-danger",key:e._id},e.option)}),l=t.options&&{labels:t.options.map(function(e){return e.option}),datasets:[{label:t.question,backgroundColor:t.options.map(function(e){return"#"+Math.random().toString(16).slice(2,8)}),borderColor:"#323643",data:t.options.map(function(e){return e.votes})}]};return r.a.createElement("div",{className:"centerdiv"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("h3",{className:"poll-title"},t.question)))),r.a.createElement("br",null),r.a.createElement("div",{className:"centerbutton"},n),r.a.createElement("br",null),t.options&&r.a.createElement(Y.a,{data:l}))})),$=a(131),ee=a.n($),te=a(554),ae=a(237),ne=a.n(ae),re=function(e){function t(e){var a;return Object(U.a)(this,t),(a=Object(M.a)(this,Object(q.a)(t).call(this,e))).handleSelect=a.handleSelect.bind(Object(V.a)(a)),a.toggle=a.toggle.bind(Object(V.a)(a)),a.state={remove:!1,visible:!1,class:"ul"},a}return Object(F.a)(t,e),Object(D.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getPolls)()}},{key:"handleSelect",value:function(e){!0===this.state.remove?(this.props.deletePoll(e),this.setState({visible:!this.state.visible,remove:!this.state.remove,class:"ul"})):this.props.history.push("/poll/".concat(e))}},{key:"toggle",value:function(){this.setState({remove:!this.state.remove,class:"x"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.getPolls,l=t.getUserPolls,c=t.auth,o=this.props.polls.map(function(t){return r.a.createElement(ee.a,{as:e.state.class},r.a.createElement(ee.a.Item,{as:"li",onClick:function(){return e.handleSelect(t._id)},key:t._id},t.question))});return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"alert1"},r.a.createElement(G.a,{color:"primary",isOpen:this.state.visible,toggle:function(){e.setState({visible:!e.state.visible})}},"Success! Want to Delete Another?")),c.isAuthenticated&&r.a.createElement("div",{className:"buttons"},r.a.createElement(ne.a,{"aria-label":"Basic example",class:"polls"},r.a.createElement(te.a,{variant:"secondary",onClick:a},"All Polls"),r.a.createElement(te.a,{variant:"secondary",onClick:l},"My Polls"),r.a.createElement(te.a,{variant:"secondary",onClick:function(){l(),e.toggle()}},"Delete Polls"))),r.a.createElement("div",{className:"polls"},o))}}]),t}(n.Component),le=Object(E.b)(function(e){return{auth:e.auth,polls:e.polls}},{getPolls:function(){return function(){var e=Object(u.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.call("get","poll");case 3:a=e.sent,t(C(a)),t({type:"REMOVE_ERROR"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n=e.t0.response.data.error,t(w(n));case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},getUserPolls:function(){return function(){var e=Object(u.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.call("get","poll/user");case 3:a=e.sent,t(C(a)),t({type:"REMOVE_ERROR"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),n=e.t0.response.data.error,t(w(n));case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},getCurrentPoll:P,deletePoll:function(e){return function(){var t=Object(u.a)(s.a.mark(function t(a){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.call("delete","poll/".concat(e));case 3:a({type:"REMOVE_ERROR"}),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),n=t.t0.response.data.error,a(w(n));case 10:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()}})(re);if(localStorage.jwtToken){N(localStorage.jwtToken);try{j.dispatch(S(v()(localStorage.jwtToken)))}catch(pe){j.dispatch(S({})),j.dispatch(w(pe))}}var ce=Object(T.g)(function(e){return r.a.createElement(E.a,{store:j},r.a.createElement(n.Fragment,null,r.a.createElement("h3",null," Create Poll "),r.a.createElement(K,null),r.a.createElement("hr",null)))}),oe=(a(550),function(e){return r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement("h3",{className:""}," Current Polls"),r.a.createElement("br",null),r.a.createElement(le,e))}),se=function(e){var t=e.match;return(0,e.getPoll)(t.params.id),r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement("br",null),r.a.createElement(Z,null))},ue=Object(T.g)(Object(E.b)(function(e){return{auth:e.auth}},{getCurrentPoll:P})(function(e){var t=e.getCurrentPoll,a=e.auth;return r.a.createElement("main",null,r.a.createElement(T.d,null,r.a.createElement(T.b,{exact:!0,path:"/poll/new",render:function(){return r.a.createElement(X,{isAuthenticated:a.isAuthenticated})}}),r.a.createElement(T.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(oe,e)}}),r.a.createElement(T.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(W,{authType:"login",isAuthenticated:a.isAuthenticated})}}),r.a.createElement(T.b,{exact:!0,path:"/register",render:function(){return r.a.createElement(W,{authType:"register",isAuthenticated:a.isAuthenticated})}}),r.a.createElement(T.b,{exact:!0,path:"/createpoll",render:function(){return r.a.createElement(ce,null)}}),r.a.createElement(T.b,{exact:!0,path:"/poll/:id",render:function(e){return r.a.createElement(se,Object.assign({getPoll:function(e){return t(e)}},e))}}),r.a.createElement(T.b,{exact:!0,path:"/poll/new",render:function(){return r.a.createElement(X,{isAuthenticated:a.isAuthenticated})}})))})),ie=(a(551),Object(E.b)(function(e){return{auth:e.auth}})(function(e){var t=e.auth;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-sm barcolor navbar-dark"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item nav-brand font-weight-bold active"},r.a.createElement("a",{className:"nav-link nav-brand",href:"/"},"Pollr")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/createpoll"},"Create Poll"))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/register"},"Register")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/login"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",onClick:x,href:"/"},"Logout")))),t.isAuthenticated&&r.a.createElement("p",{className:"text"},"Welcome back ",r.a.createElement("b",null,t.user.username)," !"))}));if(localStorage.jwtToken){N(localStorage.jwtToken);try{j.dispatch(S(v()(localStorage.jwtToken)))}catch(he){j.dispatch(S({})),j.dispatch(w(he))}}var me=function(){return r.a.createElement(E.a,{store:j},r.a.createElement(d.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(ie,null),r.a.createElement(ue,null))))};c.a.render(r.a.createElement(me,null),document.getElementById("root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.0a146031.chunk.js.map